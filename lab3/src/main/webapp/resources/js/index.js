const d=document.querySelectorAll("#form\\:rValues input"),x=document.querySelector("#form\\:y-input"),y=document.querySelector("#form\\:x-value");let a=document.querySelector("#graph");document.querySelectorAll(".dotted-line");let c=document.querySelector("#y-line"),i=document.querySelector("#x-line"),s;const u={xMax:5,xMin:-5,yMax:5,yMin:-5,rMax:5,rMin:1};document.addEventListener("DOMContentLoaded",()=>{d.forEach(e=>{e.checked&&(s=+e.value)})});a.addEventListener("mousemove",m);function m(e){const t=e.offsetY-20*(e.offsetY/320);if(c.setAttribute("stroke","red"),s){const n=u.yMax*100/s,r=-(u.yMin*100/s);t>150?(c.setAttribute("y1",t<=150+r?t:150+r),c.setAttribute("y2",t<=150+r?t:150+r)):(c.setAttribute("y1",t>=150-n?t:150-n),c.setAttribute("y2",t>=150-n?t:150-n))}else c.setAttribute("y1",t),c.setAttribute("y2",t);const o=e.offsetX-20*(e.offsetX/320);if(i.setAttribute("stroke","red"),s){const n=u.xMax*100/s,r=-(u.xMin*100/s);o>150?(i.setAttribute("x1",o<=150+n?o:150+n),i.setAttribute("x2",o<=150+n?o:150+n)):(i.setAttribute("x1",o>=150-r?o:150-r),i.setAttribute("x2",o>=150-r?o:150-r))}else i.setAttribute("x1",o),i.setAttribute("x2",o)}a.addEventListener("mouseenter",b);function b(e){d.forEach(t=>{t.checked&&(s=+t.value)}),c=document.querySelector("#y-line"),i=document.querySelector("#x-line"),f(s)}a.addEventListener("click",h);function h(e){A(i.getAttribute("x1"),c.getAttribute("y1"));const t=+((i.getAttribute("x1")-150)/100*+s).toFixed(1),o=+(-((c.getAttribute("y1")-150)/100)*+s).toFixed(1);y.value=t,x.value=o}a.addEventListener("mouseleave",()=>{c.setAttribute("stroke","transparent"),i.setAttribute("stroke","transparent"),f("R")});function f(e){const t=document.querySelectorAll(".graph-label.r-whole-pos"),o=document.querySelectorAll(".graph-label.r-half-pos"),n=document.querySelectorAll(".graph-label.r-whole-neg"),r=document.querySelectorAll(".graph-label.r-half-neg");t.forEach(l=>l.textContent=+e?e:"R"),o.forEach(l=>l.textContent=+e/2?e/2:"R/2"),n.forEach(l=>l.textContent=-e?-e:"-R"),r.forEach(l=>l.textContent=-(e/2)?-(e/2):"-R/2")}function A(e,t){const o=document.querySelector("#graph .dot");o.setAttribute("cx",e),o.setAttribute("cy",t),o.classList.remove("inactive")}const g=()=>{const e=document.cookie.split(";");for(let t=0;t<e.length;t++){const o=e[t],n=o.indexOf("="),r=n>-1?o.substr(0,n):o;document.cookie=r+"=;expires=Thu, 01 Jan 1970 00:00:00 GMT"}};document.querySelector("#logout").addEventListener("click",()=>{g(),document.location.reload()});
